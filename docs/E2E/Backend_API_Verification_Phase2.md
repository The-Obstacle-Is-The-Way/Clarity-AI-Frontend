# Backend API Verification Summary (Phase 2)

This document enumerates **all additional backend API resources** beyond the core Authentication / Patients / Digital-Twin endpoints captured in Phase 1.  The information was gathered directly from the `app/presentation/api/v1/endpoints` module of `Clarity-AI-Backend`.

**Backend Base Path** `/api/v1/`

---

> NOTE  All request/response bodies are still expressed as `Dict[str, Any]` **unless a specific Pydantic schema is referenced**.  Where the schema file is still a stub we highlight this with **Schema TODO**.

| # | Domain (router file) | Endpoint | Method | Path | Auth Req? | Notes |
|---|----------------------|----------|--------|------|-----------|-------|
| 1 | Actigraphy (`actigraphy.py`) | Get Actigraphy Summary | GET | `/analytics/actigraphy/{patient_id}/summary` | ✅ | Returns activity aggregates per day. **Schema TODO** |
|   |                          | Upload Raw Actigraphy CSV | POST | `/analytics/actigraphy/{patient_id}/upload` | ✅ | Multipart/form upload returns processing job-id. |
|   |                          | Get Processing Status | GET | `/analytics/actigraphy/jobs/{job_id}` | ✅ | Polling endpoint – returns `% complete`. |
| 2 | Analytics Hub (`analytics_endpoints.py`) | Run Generic ML Pipeline | POST | `/analytics/runner` | ✅ | Body: `{ pipeline_name: str, payload: Dict }` → returns job-id |
|   |                          | Get Job Result | GET | `/analytics/jobs/{job_id}` | ✅ | Payload varies by pipeline. |
| 3 | Biometric Alerts (`biometric_alerts.py`) | List Alerts | GET | `/biometrics/alerts?patient_id=` | ✅ | Supports pagination `page, limit`. |
|   |                          | Acknowledge Alert | POST | `/biometrics/alerts/{alert_id}/ack` | ✅ | Body: `{ acknowledged: bool }` |
| 4 | Biometric Alert Rules (`biometric_alert_rules.py`) | CRUD Rules | GET/POST/PATCH/DELETE | `/biometrics/alert-rules/…` | ✅ | Pydantic schema **present** – see `alert_rule_schemas.py`. |
| 5 | Biometric Data Streams (`biometric_endpoints.py`) | Stream List | GET | `/biometrics/streams` | ✅ | Returns available stream types. |
|   |                          | Get Stream Samples | GET | `/biometrics/streams/{stream_id}/samples?from=&to=` | ✅ | Time-series JSON. |
| 6 | Clinical Sessions (`clinical_sessions.py`) | List Sessions | GET | `/clinical/sessions?patient_id=` | ✅ | Pagination. |
|   |                          | Create Session | POST | `/clinical/sessions` | ✅ | Body per schema. |
| 7 | Clinical Analysis (`clinical_analysis.py`) | NLP Analysis | POST | `/clinical/analysis` | ✅ | Body `{ text: str, analysis_type: str }`. |
| 8 | Appointments (`appointments.py`) | CRUD Appointments | GET/POST/PATCH/DELETE | `/appointments/…` | ✅ | Calendar / timezone fields. |
| 9 | MentalLLaMA (`mentallama.py`) | Chat Completions | POST | `/mentallama/chat` | ✅ | Streaming support via SSE. |
|10 | XGBoost (`xgboost.py`) | Predict Endpoint | POST | `/analytics/xgboost/predict` | ✅ | Expects CSV or JSON rows. |
|11 | Symptom Assess. (`symptom_assessments.py`) | List Assessments | GET | `/symptom-assessments?patient_id=` | ✅ | |
|12 | Temporal Neuro-Tx (`temporal_neurotransmitter.py`) | Estimate NT Levels | GET | `/neurotransmitter/{patient_id}/estimate` | ✅ | Experimental. |

---

## Discrepancies / TODOs

1. Many endpoints still return untyped dictionaries – the frontend must apply defensive `zod` validation.
2. Streaming endpoints (MentalLLaMA chat, Analytics job-poll) require special `EventSource` / long-poll handling.
3. Pagination conventions differ (`page`,`limit` vs `offset`,`size`) – normalise in ApiProxy layer.
4. Actigraphy upload response does **not** include S3 presigned-URL; currently expects raw upload → may need adjustment.

---

*Document auto-generated by Novamind Frontend Agent — 2024-06-XX* 